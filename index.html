// ... existing HTML/CSS ...
<script>
    // PASTE NEW ADDRESS FROM IDE HERE
    const CONTRACT_ADDR = "0xd54b030b8AF411473F21345a0eFaB037a2F16F51"; 
    const ABI = [
        "function getPrediction(string calldata _question) external payable",
        "event OracleAnswer(address indexed user, string answer)"
    ];

    let signer, contract;

    document.getElementById('connectBtn').onclick = async () => {
        const provider = new ethers.BrowserProvider(window.ethereum);
        signer = await provider.getSigner();
        document.getElementById('connectBtn').style.display = 'none';
        document.getElementById('game').style.display = 'block';
        contract = new ethers.Contract(CONTRACT_ADDR, ABI, signer);

        contract.on("OracleAnswer", (user, ans) => {
            if (user.toLowerCase() === signer.address.toLowerCase()) {
                document.getElementById('answer').innerText = ans;
                document.getElementById('status').innerText = "Oracle has spoken.";
            }
        });
    };

    document.getElementById('askBtn').onclick = async () => {
        try {
            const q = document.getElementById('question').value;
            document.getElementById('answer').innerText = "WAIT...";
            document.getElementById('status').innerText = "Processing on Lightchain...";
            
            // FIXED: Sending 0.15 LCAI with enough gas to handle the AI routing
            const tx = await contract.getPrediction(q, { 
                value: ethers.parseEther("0.15"), 
                gasLimit: 3000000 
            });
            await tx.wait();
            document.getElementById('status').innerText = "Tx Confirmed. Awaiting AI callback...";
        } catch (e) {
            document.getElementById('status').innerText = "Error: " + (e.reason || e.message);
        }
    };
</script>
